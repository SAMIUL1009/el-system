<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EL System</title>

<style>
body{
    font-family:Arial;
    background:#f2f2f2;
    margin:0;
    font-size:12px;
}
.box{
    max-width:420px;
    background:#fff;
    margin:10px auto;
    padding:8px;
    border:1.5px solid #000;
}
h2{text-align:center;font-size:15px;margin:6px 0;}
input,select,button{width:100%;padding:6px;margin:4px 0;font-size:12px;}
button{background:#27ae60;color:white;border:none;}
.small-btn{background:#2980b9;}
hr{margin:8px 0;}
p{color:green;text-align:center;}
.hide{display:none;}
.msg{color:red;text-align:center;}
.tab-btns{display:flex;justify-content:space-between;margin-bottom:6px;}
.tab-btns button{width:49%;padding:6px;}
table{width:100%;border-collapse:collapse;margin-top:6px;}
td,th{border:1px solid #000;padding:4px;text-align:center;}
</style>
</head>

<body>

<div class="box">
<h2>EL System</h2>

<div class="tab-btns">
    <button id="adminTab" onclick="showTab('admin')">Admin</button>
    <button id="workerTab" onclick="showTab('worker')">Worker</button>
</div>

<!-- Admin Section -->
<div id="adminSection">
    <h2>Admin – EL Data Entry</h2>

    <select id="wid"></select>
    <input id="total" placeholder="Total EL (Year)" value="24">
    <button onclick="saveWorker()">Save / Update Worker</button>

    <hr>

    <h2>Add / Update Monthly EL</h2>
    <select id="mid"></select>
    <input id="month" placeholder="Month (e.g. Jan-2025)">
    <input id="el" placeholder="EL Taken">
    <button class="small-btn" onclick="addEL()">Save EL</button>

    <p id="msg"></p>
</div>

<!-- Worker Section -->
<div id="workerSection" class="hide">
    <h2>Worker EL Status</h2>
    <input id="widW" placeholder="Enter Worker ID">
    <button onclick="viewEL()">View EL</button>

    <div id="result" class="hide">
        <table>
            <tr><td>Name</td><td id="name"></td></tr>
            <tr><td>Worker ID</td><td id="widShow"></td></tr>
            <tr><td>Total EL</td><td id="totalW"></td></tr>
            <tr><td>EL Taken</td><td id="used"></td></tr>
            <tr><td><b>Remaining EL</b></td><td id="remain"></td></tr>
        </table>
        <table>
            <tr><th>Month</th><th>EL Taken</th></tr>
            <tbody id="rows"></tbody>
        </table>
    </div>
    <p id="msgW" class="msg"></p>
</div>

<script>
// Default Workers
const defaultWorkers = {
  "700074":"RAKIBUL SK",
  "700087":"TUSHAR PAL",
  "700271":"AZIMUDDIN SK",
  "700274":"ARUP BHASKAR",
  "700278":"IMMAMUDDIN SK",
  "700279":"SHAFFIUDDIN SK",
  "700282":"BIDHAN CH. MONDAL",
  "700283":"ANUP MONDAL",
  "700284":"SAMJAN SK",
  "700286":"KAZI MASUD"
};

// Load or init workers
let workers = JSON.parse(localStorage.getItem("workers") || "{}");
for(let id in defaultWorkers){
    if(!workers[id]){
        workers[id]={name:defaultWorkers[id],total:24,months:{}};
    }
}
localStorage.setItem("workers",JSON.stringify(workers));

// Fill dropdowns
function loadDropdown(){
    wid.innerHTML = "";
    mid.innerHTML = "";
    for(let id in workers){
        let text = id + " - " + workers[id].name;
        wid.innerHTML += `<option value="${id}">${text}</option>`;
        mid.innerHTML += `<option value="${id}">${text}</option>`;
    }
}
loadDropdown();

// Tabs
function showTab(tab){
    if(tab==='admin'){
        adminSection.classList.remove("hide");
        workerSection.classList.add("hide");
    } else{
        adminSection.classList.add("hide");
        workerSection.classList.remove("hide");
    }
}

// Admin Functions
function saveWorker(){
    let id=wid.value;
    workers[id].total=Number(total.value)||0;
    localStorage.setItem("workers",JSON.stringify(workers));
    msg.innerText="✅ Worker Updated";
}

function addEL(){
    let id=mid.value;
    if(!month.value){alert("Month লিখুন"); return;}
    workers[id].months[month.value]=Number(el.value)||0;
    localStorage.setItem("workers",JSON.stringify(workers));
    msg.innerText="✅ EL Saved";
}

// Worker Functions
function viewEL(){
    let id=widW.value.trim();
    let data=workers[id];
    if(!data){msgW.innerText="❌ Worker ID Not Found"; result.classList.add("hide"); return;}

    msgW.innerText=""; result.classList.remove("hide");

    let usedEL=0;
    rows.innerHTML="";
    for(let m in data.months){
        usedEL+=data.months[m];
        rows.innerHTML+=`<tr><td>${m}</td><td>${data.months[m]}</td></tr>`;
    }

    name.innerText=data.name;
    widShow.innerText=id;
    totalW.innerText=data.total;
    used.innerText=usedEL;
    remain.innerText=data.total-usedEL;
}
</script>

</body>
</html>
